# Blog Post Integration Guide

This document outlines the process for integrating new blog post JSON files generated by ChatGPT or other LLM tools into the blog system.

## Overview

When a new blog post JSON file is added to `src/data/blog/`, several steps are required to make it visible in the blog listing and accessible via routing.

## Prerequisites

- New JSON file in `src/data/blog/` following the naming pattern: `interview_<topic-name>.json`
- JSON file must contain valid `BlogPost` objects matching the TypeScript interface

## Step-by-Step Integration Process

### Step 1: Review and Fix JSON File Structure

The JSON file must match the `BlogPost` interface exactly:

```typescript
interface BlogPost {
  id: number;              // Required: Must be a NUMBER, not a string
  title: string;           // Required
  date: string;            // Required: Format "January 10, 2026" (human-readable, not ISO)
  excerpt: string;         // Required
  category: string;        // Required: Must match ALL_CATEGORIES or be added
  image: string;           // Required: Use placeholder URL format
  link: string;           // Required: URL path
  slug?: string;          // Optional: Auto-generated from title if not provided
  author?: string;        // Optional: Defaults to "Senior Engineer"
  content?: string;       // Optional: HTML string format (not Markdown)
  tags?: string[];        // Optional: Array of tag strings
}
```

#### Common Issues to Fix:

1. **ID Type**: Must be a number, not a string
   - ❌ `"id": "reusable-vs-feature-specific-components"`
   - ✅ `"id": 1`

2. **Date Format**: Must be human-readable format
   - ❌ `"date": "2026-01-10"` (ISO format)
   - ✅ `"date": "January 10, 2026"`

3. **Image URL**: Use placeholder format
   - ❌ `"image": "/images/blog/interview/post.png"` (relative path)
   - ✅ `"image": "https://picsum.photos/367/197?random=37"` (use next available random number)

4. **Content Format**: Must be HTML, not Markdown
   - ❌ Markdown with `##`, `**`, `---`
   - ✅ HTML with `<h2>`, `<strong>`, `<hr />`, etc.

5. **Category**: Must exist in `ALL_CATEGORIES` array (see Step 2)

6. **Tags**: Must be uppercase with spaces (not dashes), unless grammatically incorrect
   - ❌ `"tags": ["react", "component-design", "frontend-architecture"]`
   - ✅ `"tags": ["React", "Component Design", "Frontend Architecture"]`
   - Exception: Keep dashes if it's grammatically correct (e.g., "Frontend-First" could be valid, but prefer "Frontend First" or "Frontend-First" based on context)

7. **Code Blocks**: Format with proper line breaks for readability (similar to how code looks in a text editor)
   - ✅ Multi-line format with proper indentation:
     ```html
     <pre><code>&lt;EditableCard
       variant="billing"
       mode="inline"
       showFooter
       onSave={...}
     /&gt;</code></pre>
     ```
   - ❌ Single-line format (not readable):
     ```html
     <pre><code>&lt;EditableCard variant="billing" mode="inline" showFooter onSave={...} /&gt;</code></pre>
     ```

### Step 2: Add Category to Filter List (If New)

If the blog post uses a category that doesn't exist in the filter dropdown:

**File**: `src/sections/BlogFilters/index.tsx`

**Action**: Add the new category to the `ALL_CATEGORIES` array:

```typescript
const ALL_CATEGORIES = [
  "Frontend Frameworks",
  "Frontend Architecture",  // ← Add new category here
  "JavaScript & TypeScript",
  // ... existing categories
];
```

**Note**: Categories should be added in a logical order (grouped by topic area).

### Step 3: Register Topic in Topics Registry

**File**: `src/content/topics.ts`

**Action**: Add a new topic entry to the `topics` array:

```typescript
export const topics: TopicMetadata[] = [
  // ... existing topics
  {
    id: "interview_reusable_vs_feature_specific_components_a_practical_decision_framework",
    label: "Reusable vs Feature-Specific Components: A Practical Decision Framework",
    description: "A practical framework for deciding when to make components reusable vs feature-specific",
  },
];
```

**Important**: 
- The `id` must match the filename (without `.json` extension)
- Use the exact filename as the topic ID
- `label` should be a human-readable display name
- `description` is optional but recommended

### Step 4: Import and Register Blog Data

**File**: `src/data/blog/index.ts`

**Action 1**: Add import statement at the top:

```typescript
import interviewReusableVsFeatureSpecificComponentsPosts from "./interview_reusable_vs_feature_specific_components_a_practical_decision_framework.json";
```

**Action 2**: Add entry to `blogPostsByTopic` object:

```typescript
export const blogPostsByTopic: Record<TopicId, BlogPosts> = {
  default: defaultPosts as BlogPosts,
  // ... existing topics
  interview_reusable_vs_feature_specific_components_a_practical_decision_framework: interviewReusableVsFeatureSpecificComponentsPosts as BlogPosts,
};
```

**Important**: 
- The key must match the topic ID from Step 3
- Variable name should follow camelCase convention
- Use `as BlogPosts` type assertion

### Step 5: Verify Integration

After completing all steps, verify:

1. **Build succeeds**: `npm run build`
2. **Tests pass**: `npm test -- --run`
3. **No linting errors**: Check for TypeScript/ESLint errors
4. **Blog listing page**: Navigate to `/blog` and verify:
   - Post appears in the grid
   - Category filter includes the new category (if added)
   - Search works for the post
5. **Blog post page**: Navigate to `/blog/<slug>` and verify:
   - Post renders correctly
   - All sections display (hero, content, tags, author, related posts)

## Important Notes

### ID Uniqueness

**Critical**: Blog posts can have duplicate IDs across different topics (e.g., multiple posts with `id: 1`). The system handles this by:

- Using **slugs** (not IDs) for:
  - React keys in BlogGrid
  - Filtering featured post from grid
  - Finding posts by slug
  - Related posts logic

**Do not** rely on IDs being unique across topics. Always use slugs for uniqueness.

### Image Random Numbers

When assigning random image numbers:
1. Check existing files for highest random number used
2. Use next available number (e.g., if highest is 36, use 37)
3. Keep track to avoid collisions

**Command to find highest random number**:
```bash
grep -h "random=" src/data/blog/*.json | grep -o "random=[0-9]*" | sort -t= -k2 -n | tail -1
```

### Date Format Conversion

If ChatGPT provides ISO format dates (`2026-01-10`), convert to human-readable format:

**JavaScript conversion** (for reference):
```javascript
const isoDate = "2026-01-10";
const date = new Date(isoDate);
const formatted = date.toLocaleDateString('en-US', { 
  year: 'numeric', 
  month: 'long', 
  day: 'numeric' 
});
// Result: "January 10, 2026"
```

### Content Format Conversion

If content is provided in Markdown format, it must be converted to HTML:

**Common conversions**:
- `## Heading` → `<h2>Heading</h2>`
- `**bold**` → `<strong>bold</strong>`
- `*italic*` → `<em>italic</em>`
- `---` → `<hr />`
- Lists: Convert Markdown list syntax to `<ul><li>` or `<ol><li>`
- Code blocks: `<pre><code>...</code></pre>`

**Code Block Formatting for Readability**:
- Format code blocks with proper line breaks and indentation (like in a text editor)
- Use `\n` in JSON strings for newlines
- Example:
  ```json
  "<pre><code>&lt;EditableCard\n  variant=\"billing\"\n  mode=\"inline\"\n  showFooter\n  onSave={...}\n/&gt;\n</code></pre>"
  ```
- This ensures code is readable both in the JSON file and in the rendered HTML

**Note**: The `html-react-parser` package expects HTML strings, not Markdown.

**Tag Format Requirements**:
- Tags must be **uppercase** (Title Case) with **spaces instead of dashes**
- Examples:
  - ✅ `"React"`, `"Component Design"`, `"Frontend Architecture"`
  - ❌ `"react"`, `"component-design"`, `"frontend-architecture"`
- Exception: Keep dashes only if grammatically necessary (rare)

## Automation Opportunities

Future improvements could automate:

1. **ID assignment**: Auto-increment based on existing posts
2. **Date format conversion**: Auto-convert ISO to human-readable
3. **Image placeholder assignment**: Auto-assign next available random number
4. **Category validation**: Check if category exists, auto-add if not
5. **Topic registration**: Auto-generate topic entry from filename
6. **Import generation**: Auto-generate import and registration code

## Troubleshooting

### Post doesn't appear in blog grid

**Check**:
1. Is the topic registered in `topics.ts`?
2. Is the import statement correct in `index.ts`?
3. Is the entry added to `blogPostsByTopic`?
4. Does the category match `ALL_CATEGORIES`?
5. Is the JSON file valid (no syntax errors)?
6. Are IDs numbers (not strings)?

### Duplicate key warnings in console

**Fix**: Ensure BlogGrid uses slugs as React keys (already implemented):
```typescript
<article key={getBlogPostSlug(post)} className={styles.card}>
```

### Post not found when navigating to slug

**Check**:
1. Does the `link` field match the expected slug?
2. Is `getBlogPostBySlug()` searching across all topics?
3. Does the slug generation match the link format?

### Category filter doesn't show new category

**Fix**: Add category to `ALL_CATEGORIES` array in `BlogFilters/index.tsx`

## Example: Complete Integration

Here's a complete example for a file named `interview_state_management.json`:

### 1. JSON File Structure
```json
[
  {
    "id": 1,
    "title": "State Management Patterns in React",
    "date": "January 15, 2026",
    "excerpt": "Exploring different state management approaches...",
    "category": "State Management & Data Flow",
    "image": "https://picsum.photos/367/197?random=38",
    "link": "/blog/state-management-patterns-react",
    "author": "Senior Engineer",
    "tags": ["react", "state-management", "redux", "zustand"],
    "content": "<p>Content in HTML format...</p>"
  }
]
```

### 2. Add to topics.ts
```typescript
{
  id: "interview_state_management",
  label: "State Management Patterns in React",
  description: "Exploring different state management approaches in React applications",
},
```

### 3. Add to index.ts
```typescript
import interviewStateManagementPosts from "./interview_state_management.json";

export const blogPostsByTopic: Record<TopicId, BlogPosts> = {
  // ... existing
  interview_state_management: interviewStateManagementPosts as BlogPosts,
};
```

### 4. Category Check
- "State Management & Data Flow" already exists in `ALL_CATEGORIES` ✓
- No action needed

## Summary Checklist

When integrating a new blog post JSON file:

- [ ] Fix JSON structure (ID as number, date format, image URL, content as HTML)
- [ ] Format tags: uppercase with spaces (not dashes)
- [ ] Format code blocks with proper line breaks for readability
- [ ] Add category to `ALL_CATEGORIES` if new
- [ ] Register topic in `topics.ts`
- [ ] Import JSON file in `index.ts`
- [ ] Add to `blogPostsByTopic` object
- [ ] Verify build succeeds
- [ ] Verify tests pass
- [ ] Test blog listing page
- [ ] Test individual blog post page (verify code blocks render correctly)
- [ ] Test category filtering
- [ ] Test search functionality
- [ ] Verify code blocks are readable and mobile-responsive

---

**Last Updated**: Based on integration of `interview_reusable_vs_feature_specific_components_a_practical_decision_framework.json`

**Key Learnings**:
- Blog listing shows posts from ALL topics (not just current topic)
- Use slugs, not IDs, for uniqueness across topics
- Featured post filtering must use slugs to avoid excluding posts with duplicate IDs
- Tags must be uppercase with spaces (not dashes) for consistency
- Code blocks should be formatted with line breaks for readability (like in a text editor)
- Code blocks use horizontal scroll on mobile for long lines (`overflow-x: auto`)
- Code block styling ensures readability with monospace font, proper padding, and subtle background

